(function(){jQuery(function(){var e,t,i,a,n,r,c,o,f,s,d;return i="undefined"!=typeof web3&&null!==web3,r=!0,o=function(){var e;return e=web3.db.getString("etherstarter","campaigns"),""===e?[]:JSON.parse(e)},t=function(e){var t;return t=o(),t.push(e),web3.db.putString("etherstarter","campaigns",JSON.stringify(t))},d=function(){return s.watch({topic:[web3.fromAscii("etherstarter"),web3.fromAscii(a),web3.fromAscii("announce-campaign")]}).arrived(function(e){var i;return i=JSON.parse(web3.toAscii(e.payload)),t(i)})},f=function(e,t,i){var n;return n=web3.fromAscii(JSON.stringify({id:e,title:t,description:i})),s.post({topic:[web3.fromAscii("etherstarter"),web3.fromAscii(a),web3.fromAscii("announce-campaign")],payload:n,ttl:600})},i&&(s=web3.shh,a=web3.db.get("etherstarter","contract"),e=JSON.parse(web3.db.getString("etherstarter","abi")),n=web3.eth.contract(a,e),d()),$("body.admin").length>0?(r&&($("#create_campaign").show(),$("#title").val("Title"),$("#description").val("Description"),$("#goal").val("500"),$("#duration").val("10"),$("#recipient").val("dedc82cb364f93ddec1bf323069951b91c75c591")),c=$("#create_campaign form"),c.on("submit",function(e){var t,a,r,o,s,d,l;return e.preventDefault(),l=c.find("#title").val(),a=c.find("#description").val(),r=+c.find("#goal").val(),t=Date.now()/1e3+24*+c.find("#duration").val()*60*60,s="0x"+c.find("#recipient").val(),i?(o=n.call().get_free_id(),d=n.transact().create_campaign(o,s,r,t,0,0),f(o,l,a)):void 0}),$("#create_campaign a#close").on("click",function(e){return e.preventDefault(),$("#create_campaign").hide(),$("a#create_new_campaign").show()}),$("#create_new_campaign").on("click",function(e){return e.preventDefault(),$(this).hide(),$("#create_campaign").fadeIn(),c.find("#title").focus()})):void 0})}).call(this);